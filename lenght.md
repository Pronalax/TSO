Поле, задающее длину заголовка UDP в байтах и данные UDP. Минимальная длина составляет 8 байт, так как это длина заголовка. Размер поля устанавливает теоретический предел в 65 535 байт (заголовок 8 байт + 65 527 байт данных) для UDP-датаграммы. Тем практический предел длины данных, налагаемый базовым Протокол IPv4 составляет 65 507 байт (65 535 − 8 байт UDP-заголовок − 20 байт IP заголовок).


Общая длина — это длина дейтаграммы, измеряемая в октетах, включая интернет-заголовок и данные. Это поле позволяет длине дейтаграммы достигать 65 535 октетов. Такие длинные дейтаграммы непрактичны для большинства хостов и сетей. Все хосты должны быть готовы принять дейтаграммы до 576 октетов (независимо от того, поступают ли они целиком или фрагментами). Рекомендуется отправлять датаграммы размером более 576 октетов только в том случае, если у них есть уверенность в том, что место назначения готово принять большие датаграммы. Число 576 выбрано таким образом, чтобы обеспечить передачу блока данных разумного размера в дополнение к требуемой информации заголовка. Например, этот размер позволяет поместить блок данных из 512 октетов плюс 64 октета заголовка в дейтаграмму. Максимальный интернет-заголовок составляет 60 октетов, а типичный интернет-заголовок — 20 октетов, что позволяет использовать поля для заголовков протоколов более высокого уровня.


Таким образом, максимальная общая длина составляет 65535, но это включает в себя сам заголовок IP. Таким образом, у вас есть полезная нагрузка IP, которая может быть 65535 - 20 = 65515.

Но полезная нагрузка IP в вашем случае - это UDP, и UDP имеет свой собственный заголовок, который составляет 8 байт. Таким образом, вы получаете предел полезной нагрузки пакета UDP: 65 535 − 8 байт UDP заголовок − 20 байт IP-заголовок`theoretical`

Обратите внимание на использование теоретического вместо практического. Практический предел UDP-пакета учитывает вероятность фрагментации и, таким образом, учитывает mtu сетевого уровня. Ссылка выше также имеет интересное предложение, содержащее значение 576. 576 - 20 - 8 = 548, что не совсем 534, но приближается. Это может объяснить этот практический предел.



---------------


крч у нас есть UDP пакет, у которого есть свой заголовок в 8 байт + загловок IPv4 20 байт. Итого, получается, что мы отнимаем от максимального значения 28 байт.
[[протокол IPv4]]  
