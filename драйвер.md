[Драйвер устройства и с чем его едят / Habr](https://habr.com/en/company/driverpack/blog/252927/)



Драйвер (англ. driver, мн. ч. драйверы) — **компьютерное программное обеспечение, с помощью которого другое программное обеспечение (операционная система) получает доступ к аппаратному обеспечению некоторого устройства**.

Обычно с операционными системами поставляются драйверы для ключевых компонентов аппаратного обеспечения, без которых система не сможет работать/

Основное назначение драйвера – это упрощение процесса программирования работы с устройством.  
  
Он служит «переводчиком» между хардовым (железным) интерфейсом и приложениями или операционными системами, которые их используют. Разработчики могут писать, с помощью драйверов, высокоуровневые приложения и программы не вдаваясь в подробности низкоуровневого функционала каждого из необходимых устройств в отдельности.  
  
Как уже упоминалось, драйвер специфичен для каждого устройства. Он «понимает» все операции, которые устройство может выполнять, а также протокол, с помощью которого происходит взаимодействие между софтовой и железной частью. И, естественно, управляется операционной системой, в которой выполняет конкретной приложение либо отдельная функция самой ОС («печать с помощью принтера»).  
  
Если вы хотите отформатировать жесткий диск, то, упрощенно, этот процесс выглядит следующим образом и имеет определенную последовательность: (1) сначала ОС отправляет команду в драйвер устройства используя команду, которую понимает и драйвер, и операционная система. (2) После этого драйвер конкретного устройства переводит команду в формат, который понимает уже только устройство. (3) Жесткий диск форматирует себя, возвращает результат драйверу, который уже впоследствии переводит эту команду на «язык» операционной системы и выдает результат её пользователю (4).

![[Pasted image 20221119183348.png]]


Для каждого устройства существует свой строгий порядок выполнения команд, называемой «инструкцией». Не зная инструкцию к устройству, невозможно написать для него драйвер, так как низкоуровневые машинные команды являются двоичным кодом (прерываниями) которые на выходе отправляют в драйвер результат, полученный в ходе выполнения этой самой инструкции.  
  
При создании драйвера для Линукса, вам необходимо знать не только тип шины и ее адрес, но и схематику самого устройства, а также весь набор электрических прерываний, в ходе исполнения которых устройство отдает результат драйверу.  
  
Написание любого драйвера начинается с его «скелета» — то есть самых основных команд вроде «включения/выключения» и заканчивая специфическими для данного устройства параметрами.


----------
## И чем драйвер не является

  
Часто драйвер устройства сравнивается с другими программами, выполняющими роль «посредника» между софтом и/или железом. Для того, чтобы расставить точки над «i», уточняем:  
  

-   Драйвер не является интерпретатором, так как не исполняется напрямую в софтовом слое приложения или операционной системы.
-   Драйвер не является компилятором, так как не переводит команды из одного софтового слоя в другой, такой же.-------------



------------------------------
А в чем проблема-то? Всю жизнь в русском языке встречался с тем, что программа обслуживания устройства называлась [драйвером](https://ru.wikipedia.org/wiki/%D0%94%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80). То, что в Линуксе это называется «модули ядра» — это вещь специфичная исключительно для Линукса.  
  
В MS-DOS, Windows и многих других операционных системах (даже просто средах исполнения, не обязательно ОС) такие программы принято называть «драйверами», на жаргоне — «дрова». В некоторых средах исполнения нет понятия «ядро», и поэтому программа обслуживания устройства в принципе не может являться модулем ядра. С другой стороны, в Windows есть так называемые User-mode drivers, которые тоже никаким боком не являются частью ядра ОС.
