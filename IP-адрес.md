IP (Internet Protocol) обеспечивает маршрутизацию между хостами и адресацию



IP - Internet Protocol

Это тот самый айпишник, айпи, ипэ

Если нам нужно отправить письмо, то мы указываем Куда и от кого
![[Pasted image 20221105191204.png]]
приклеить марки, сходить на почту и тд и постоять в очереди, без этого ничего не выйдет

------------------------
С IP - адресом - такая же тема, это адрес компьютера/ сервера  и любой другой активной сетевой железяки.

------------------------
Чтобы общаться с другим устройствами - нужно чтобы у него был свой уникальный индетификатор ID - чтобы понять куда нужно слать данные и как их получить обратно.
![[Pasted image 20221105191546.png]]

- Допустим, мы хотим зайти на сайт - для этого, нам нужно отравить на него письмо сайту и сказать, что нам нужна его главная страница
- ![[Pasted image 20221105191712.png]]
- ![[Pasted image 20221105191739.png]]
- Сайт получит это письмо и вышлет нам страничку по адресу указанному на конверте в поле "Отправитель" 
- ![[Pasted image 20221105191845.png]]
- Почему он так странно выглядит?
- компьютеры общаются нулями и единицами, которые называются битами и на самом деле это строка выглядит как строка из 32 двух нулей и единиц.
- ![[Pasted image 20221105192007.png]]
- двоичная система

  А чтобы это все дело выглядело читабельным его перевели в двоичную систему счисления и разделили на 4 части с точками
  ![[Pasted image 20221105192322.png]]
  По итогу, получили такую штуку ![[Pasted image 20221105192357.png]]
  -> По итогу получили 4 числа от 0 до 255, с которыми гораздо проще работать
  Это и есть IPv4
  С этой версией есть проблема - всего может существовать 4 294 967 296 адресов. Этого нехватит для всех устройств. IP - адрес может быть даже у холодильника.
  Здесь мы уже используем число из 128 бит, которые делим на 8 частей , а потом 
  делим их при помощи двоеточий
  ![[Pasted image 20221105192917.png]]
  А потом, уже приводим все это дело в 16-ричную систему счисления.
  ![[Pasted image 20221105192944.png]]
принцип работы такой же, но адресов теперь 10^28 степени


Теперь адрес уже делится на статический и динамический

1) Статический-адрес - не меняется у компьютера
![[Pasted image 20221105193131.png]]
2) Динамический - назначается на определенное  время
![[Pasted image 20221105193228.png]] 
а затем меняется  меняется другим
![[Pasted image 20221105193254.png]]

Зачем это нужно? Дело в том, что если я хочу попасть на сайт, мне необходимо знать его адрес - если он изменится - то я не смогу его найти
![[Pasted image 20221105193404.png]]
Для этого, нужны статические адреса
![[Pasted image 20221105193428.png]]

А мне, как посетителю сайта - статический адрес не нужен, подойдет динамический адрес. Который я напишу на конверте в поле отправителей

------------------------------------------------
Также, можно называть IP-адреса внутренними и внешними

IPv4 - ограниченное кол-во - на всех нехватает. А в интернете - нельзя иметь два одинаковых адреса - ведь в таком случае, нельзя будет понять, кому передавать данные.

Но как дать возможность дать всем заходить в интернет?
Дать всем IPv6?
Можно, но это дорого и долго.. 

Тут нам на помощь приходит технология [[NAT]] - Network Address Translation  , а точнее его надстройка [[PAT]] - Port Adress Translation 
(суть в том, что много устройств могут входить с одним и тем же адресом)

Но как так? Ведь мы сказали, что нельзя входить в сеть с двумя одинаковыми адресами

- Суть в том, что у нас есть внутренний адрес  - который выдает провайдер , с которым я нахожусь внутри локальной сети
![[Pasted image 20221105194144.png]]

А есть внешний адрес, который выдает мне провайдер, для выхода в интернет
![[Pasted image 20221105194230.png]]
 И основная идея, заключается в том, что у меня и у других пользователей одинаковые адреса 
 ![[Pasted image 20221105194327.png]]
 
 Их можно отличить, благодаря тому, что к адресу добавляется [[порт]] - это уникальное значение, после двоеточия, которое присваивает провайдер
 ![[Pasted image 20221105194434.png]]
  и который является дополнительным индентификатором, позволяющим различать адреса
  ![[Pasted image 20221105194547.png]]
- Это позволяет решать проблему с нехваткой адресов, и является дополнительным слоем безопасности.
------------------------

Так а что там насчет вычисления по IP?

- Этот IP-адрес нужно сначала найти
- Но это будет внешний адрес, который есть у тысячи других компьютеров
![[Pasted image 20221105194947.png]]

- Но еще нужно сопоставить внешний адрес и внутренний адрес, а это может только провайдер


-------------------
Итак IP-адрес — это адрес, используемый узлом на сетевом уровне. Он имеет иерархическую структуру. Что это значит? Это значит, что каждая цифра в его написании несет определенный смысл.
- Объясню на очень хорошем примере. Примером будет номер обычного телефона — +74951234567. Первой цифрой идет +7. Это говорит о том, что номер принадлежит [зоне](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D1%82%D0%B5%D0%BB%D0%B5%D1%84%D0%BE%D0%BD%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D1%82%D1%80%D0%B0%D0%BD) РФ. Далее следует 495. Это код Москвы. И последние 7 цифр я взял случайными. Эти цифры закреплены за районной зоной. Как видите здесь наблюдается четкая иерархия.


Выше мы говорили о структуре телефонных номеров и их иерархии. И вот на заре рождения Интернета в том представлении, в каком мы его привыкли видеть, возник вопрос. Вопрос заключался в том, что IP-адреса нужно как-то сгруппировать и контролировать выдачу. Решением было разделить все пространство IP-адресов на классы. Это решение получило название **классовая адресация (от англ. Classful)**. Она уже давно устарела, но практически в любой книге на нее отводятся целые главы и разделы. Cisco тоже не забывает про это и в своих учебных материалах рассказывает про нее. Поэтому я пробегусь по этой теме и покажу, чем она блистала с 1981 по 1995 год.

![[Pasted image 20221110191424.png]]



Пространство было поделено на 5 классов. Каждому классу был назначен блок адресов.  
  
**Начнем с класса A**. Если внимательно посмотреть на таблицу, то можно заметить, что этому блоку дан самый большой блок адресов, а если быть точным, то половина всего адресного пространства. Предназначался данный класс для крупных сетей. Структура этого класса выглядит следующим образом.

![[Pasted image 20221110191447.png]]



В чем суть. Первый октет, то есть 8 бит, остаются за адресом сети, а 3 последних октета (то есть оставшиеся 24 бита) назначаются хостам. Вот для того, чтобы показать, какой кусок относится к сети, а какой к хостам, используется **маска**. По структуре записи она аналогична записи IP-адреса. Отличие маски от IP-адресов в том, что 0 и 1 не могут чередоваться. Сначала идут 1, а потом 0. Таким образом, там где есть единица, значит это участок сети. Чуть ниже, после разбора классов, я покажу, как с ней работать. Сейчас главное знать, что маска класса A — 255.0.0.0. В таблице еще упомянут какой-то первый бит и для класса A он равен 0. Этот бит как раз нужен для того, чтобы сетевое устройство понимало, к какому классу оно принадлежит. Он же еще задает начальный и конечный диапазон адресов. Если в двоичном виде записать на всех октетах единицы, кроме первого бита в первом октете (там всегда 0), то получится 127.255.255.255, что является границей класса A. Например, возьмем адрес 44.58.63.132. Мы знаем, что у класса A первый октет отдается под адрес сети. То есть «44» — это адрес сети, а «58.63.132» — это адрес хоста.

- P.s сама маска, не входит в [[IP-пакет]] 

Но смотри, в чем прикол, классы уже давно устарели и в реале, никто давать мне не будет дадут какой-то кусок класса, и скажут вот твоя маска. Т.е как я какое количество хостов, я смогу пронумеровать


----
Про классы обмолвились. Теперь озвучу вопрос, который мне недавно задали. Так зачем тогда маски? У нас итак хосты понимают в каком они классе. Но суть вот в чем. Например, у вас есть маленький офис, и вам нужен блок IP-адресов. Никто не будет вам выдавать все адреса класса C. А дадут только его кусок. Например 192.168.1.0 с маской 255.255.255.0. Так вот эта маска и будет определять вашу границу. Мы уже говорили, что октет варьируется в значении от 0 до 255. Вот этот 4 октет полностью в вашем распоряжении. За исключением первого адреса и последнего, то есть 0 и 255 в данном случае. Первый адрес — это адрес сети (в данном случае 192.168.1.0), а последний адрес — широковещательный адрес (192.168.1.255). Напомню, что широковещательный адрес используется в том случае, когда надо передать информацию всем узлам в сети.( [[узел]] ) Поэтому есть правило. Если вам надо узнать **номер сети, то все биты относящиеся к хосту обращаете в 0** , а если широковещательный, то все биты — в 1. Поэтому, если из 256 адресов забирается 2 адреса, то на назначение хостам остается 254 адреса (256 — 2). На собеседованиях и экзаменах часто любят спрашивать:
«Количество IP-адресов в сети?»  
«Сколько доступных IP-адресов в сети для назначения хостам?». Два разных вопроса, которые могут поставить в тупик.

Ответом на первый будет — все адреса, включая адрес сети и широковещательный адрес, 
а на второй вопрос — все адреса, кроме адреса сети и широковещательного адреса.
[[адрес сети]]
[[широковещательный адрес]]   [[широковещательной сети]]

[Основы компьютерных сетей. Тема №5. Понятие IP адресации, масок подсетей и их расчет / Habr](https://habr.com/en/post/314484/)
