![[Pasted image 20221107101844.png]]

коммутатор 24 порта Fast Ethernet и 2 порта GB ethernet

чаще всего используют 2960

+Igor K Некоторые свитчи могут быть переведены в режим хаба путем атаки на таблицу mac адресов, переполнив её. Решение этой проблемы у свитчей разное, отключение порта с которого приходят пакеты с постоянно меняющимися mac адресами, полный сброс mac таблицы и заполнение её по новой или перейти в режим хаба и отправлять пакеты всем. А отправленный пакет не по назначению можно прослушать снифером затем.

--------------------------------------------
_Запоминание адресов и перенаправление пакетов_: Как мы уже говорили [ранее](http://habrahabr.ru/post/138043/), у каждого свича есть таблица сопоставления MAC-адресов и портов (aka CAM-table — Content Addressable Memory Table). Когда устройство, подключенное к свичу, посылает кадр в сеть, свич смотрит MAC-адрес отправителя и порт, откуда получен кадр, и добавляет эту информацию в свою таблицу. Далее он должен передать кадр получателю, адрес которого указан в кадре. По идее, информацию о порте, куда нужно отправить кадр, он берёт из этой же CAM-таблицы. Но, предположим, что свич только что включили (таблица пуста), и он понятия не имеет, в какой из его портов подключен получатель. В этом случае он отправляет полученный кадр во все свои порты, кроме того, откуда он был принят. Все конечные устройства, получив этот кадр, смотрят MAC-адрес получателя, и, если он адресован не им, отбрасывают его. Устройство-получатель отвечает отправителю, а в поле отправителя ставит свой адрес, и вот свич уже знает, что такой-то адрес находится на таком-то порту (вносит запись в таблицу), и в следующий раз уже будет переправлять кадры, адресованные этому устройству, только в этот порт. Чтобы посмотреть содержимое CAM-таблицы, используется команда **show mac address-table**. Однажды попав в таблицу, информация не остаётся там пожизненно, содержимое постоянно обновляется и если к определенному mac-адресу не обращались 300 секунд (по умолчанию), запись о нем удаляется.  
Тут всё должно быть понятно. Но зачем _защита от петель_? И что это вообще такое?

----------
Крч, когда мы только устанавливаем switch , и если хотим переслать пакеты, наш коммутатор, пересылает пакеты всем компьютерам в сети, чтобы заполнить таблицу MAC-адресов в сети. (ну это если она у нас не настроена - ну типо куда пересылать то? и заполняет все адреса , которые находятся в сети).    и таблица сама по себе, обновляется каждые 300 секунд - если к определенному mac-адресу не обращались 300 секунд

-------
Широковещательный шторм:

  
Часто, для обеспечения стабильности работы сети в случае проблем со связью между свичами (выход порта из строя, обрыв провода), используют избыточные линки (redundant links) — дополнительные соединения. Идея простая — если между свичами по какой-то причине не работает один линк, используем запасной. Вроде все правильно, но представим себе такую ситуацию: два свича соединены двумя проводами (пусть будет, что у них соединены fa0/1 и fa0/24).

![[Pasted image 20221109175432.png]]

Одной из их подопечных — рабочих станций (например, ПК1) вдруг приспичило послать широковещательный кадр (например, ARP-запрос). Раз широковещательный, шлем во все порты, кроме того, с которого получили.

![[Pasted image 20221109175455.png]]


Второй свич получает кадр в два порта, видит, что он широковещательный, и тоже шлет во все порты, но уже, получается, и обратно в те, с которых получил (кадр из fa0/24 шлет в fa0/1, и наоборот).

![[Pasted image 20221109175530.png]]
Первый свич поступает точно также, и в итоге мы получаем широковещательный шторм (broadcast storm), который намертво блокирует работу сети, ведь свичи теперь только и занимаются тем, что шлют друг другу один и тот же кадр.

![[Pasted image 20221109183116.png]]
Как можно избежать этого? Ведь мы, с одной стороны, не хотим штормов в сети, а с другой, хотим повысить ее отказоустойчивость с помощью избыточных соединений? Тут на помощь нам приходит [[STP]] (Spanning Tree Protocol) 